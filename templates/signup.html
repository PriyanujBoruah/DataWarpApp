{% extends "base_auth.html" %}

{% block title %}Sign Up - DataWarp{% endblock %}

{% block auth_container_content %}
{# All styling is now inherited from base_auth.html, so no extra style block is needed. #}

<div class="login-form-section">
    <img src="{{ url_for('static', filename='img/logomain.png') }}" class="logo-img" alt="DataWarp Logo">
    
    <h2>Create Your Account</h2>
    <p class="subtitle">Join DataWarp and simplify your data workflow today.</p>

    <div class="flash-messages mb-3">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category if category != 'message' else 'info' }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
    </div>

    <form method="POST" action="{{ url_for('signup') }}">
        <div class="mb-3">
            <label for="username" class="form-label">Username*</label>
            <input type="text" class="form-control" id="username" name="username" value="{{ username if username else '' }}" placeholder="Choose a unique username" required pattern="^[a-zA-Z0-9_.-]{3,20}$" title="3-20 chars: letters, numbers, underscore, dot, hyphen.">
        </div>

        <div class="mb-3">
            <label for="email" class="form-label">Email address*</label>
            <input type="email" class="form-control" id="email" name="email" value="{{ email if email else '' }}" placeholder="you@example.com" required>
        </div>

        <div class="mb-3">
            <label for="password" class="form-label">Password*</label>
            <input type="password" class="form-control" id="password" name="password" placeholder="Create a strong password (min. 6 chars)" required>
        </div>
        
        <div class="mb-3">
            <label for="referral_code_used" class="form-label">Referral Code (Optional)</label>
            <input type="text" class="form-control" id="referral_code_used" name="referral_code_used" value="{{ referral_code_used if referral_code_used else '' }}" placeholder="Enter if you have one">
        </div>

        {# The button now uses the .btn-login class from the base template for a consistent look #}
        <button type="submit" class="btn btn-login">Create Account</button>
    </form>
    
    {# Removed inline styles, as they are now handled by base_auth.html #}
    <p class="mt-4 text-center" style="font-size:0.85rem;">
        Already have an account? <a href="{{ url_for('login') }}">Log in instead</a>
    </p>

</div>

{# The info-section for branding/testimonials #}
<div class="info-section">
    <div class="info-section-inner-card">
        <h3>Unlock Your Data's Potential</h3>
        <div class="testimonial-quote-icon"><i class="bi bi-rocket-takeoff" style="font-size: 2.5rem; line-height: 1;"></i></div>
        <p class="testimonial-text">
            "DataWarp transformed how we approach data preparation. The Pro trial gave us the tools we needed to see the immediate impact."
        </p>
        <p class="testimonial-author">Jane Doe</p>
        <p class="testimonial-author-title">Lead Data Analyst, Innovate Corp</p>

        <div class="testimonial-nav" style="visibility: hidden;"> 
            <button class="testimonial-nav-btn prev"><i class="bi bi-arrow-left"></i></button>
            <button class="testimonial-nav-btn next"><i class="bi bi-arrow-right"></i></button>
        </div>
        
        <div class="starburst-graphic">
            <i class="bi bi-gem"></i> 
        </div>
    </div>

    <div class="bottom-card">
        <h4>Join Thousands of Data Professionals</h4>
        <p>Start your journey with DataWarp and experience a smarter way to handle data, from cleanup to insights.</p>
        <div class="bottom-card-avatars">
            <img src="https://i.pravatar.cc/28?img=9" alt="User 9">
            <img src="https://i.pravatar.cc/28?img=10" alt="User 10">
            <img src="https://i.pravatar.cc/28?img=11" alt="User 11">
            <img src="https://i.pravatar.cc/28?img=12" alt="User 12">
        </div>
    </div>
</div>
{% endblock %}